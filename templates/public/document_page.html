{% extends 'base.html' %}

{% block hero %}
<h1 class="visually-hidden">{{ seo.h1 }}</h1>
{% if hero %}
<section class="hero page-hero" style="background-image: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url('{{ hero.image }}');">
    <div class="container">
        <div class="hero-content">
            {# –ó–∞–≥–æ–ª–æ–≤–æ–∫ —É–¥–∞–ª–µ–Ω –ø–æ –ø—Ä–æ—Å—å–±–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è #}
        </div>
    </div>
</section>
{% endif %}
{% endblock %}

{% block content %}
<nav class="breadcrumbs">
    {% for crumb in breadcrumbs %}
    {% if crumb.url %}
    <a href="{{ crumb.url }}">{{ crumb.name }}</a> /
    {% else %}
    <span>{{ crumb.name }}</span>
    {% endif %}
    {% endfor %}
</nav>

<div class="document-detail">
    <div class="document-content-wrapper">
        <div class="document-preview">
            {% if doc.preview_image %}
            <img src="{{ doc.preview_image }}" alt="{{ doc.preview_alt_text or doc.title }}" title="{{ doc.preview_title_text or '' }}" class="document-preview-img">
            {% else %}
            <div class="document-preview-placeholder">
                <span class="placeholder-icon">üìÑ</span>
                <span class="placeholder-text">{{ doc.title }}</span>
            </div>
            {% endif %}
        </div>
        
        <div class="document-info">
            <h1 class="document-title">{{ seo.h1 }}</h1>
            
            {% if doc.description %}
            <p class="document-description">{{ doc.description }}</p>
            {% endif %}
            
            <div class="document-meta">
                {% if doc.document_type %}
                <span class="document-type">{{ doc.document_type.name }}</span>
                {% endif %}
                <span class="document-date">{{ doc.created_at.strftime('%d.%m.%Y') if doc.created_at else '' }}</span>
            </div>
            
            <a href="{{ doc.file_path }}" class="btn btn-primary download-btn" target="_blank">
                –°–∫–∞—á–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç
            </a>
        </div>
    </div>
    
    {% if seo.seo_text %}
    <div class="seo-text document-seo-text">
        {{ seo.seo_text|safe }}
    </div>
    {% endif %}
</div>

<style>
.document-detail { max-width: 900px; margin: 0 auto; padding: 30px 0; }
.document-content-wrapper { display: grid; grid-template-columns: 1fr 2fr; gap: 40px; margin-bottom: 40px; }
.document-preview-img { width: 100%; border: 1px solid var(--border-color); border-radius: var(--radius); box-shadow: var(--shadow); }
.document-preview-placeholder { 
    width: 100%; 
    aspect-ratio: 3/4; 
    background: linear-gradient(135deg, #f5f5f5 0%, #e0e0e0 100%); 
    border: 1px solid var(--border-color); 
    border-radius: var(--radius); 
    display: flex; 
    flex-direction: column; 
    align-items: center; 
    justify-content: center;
    color: #666;
}
.placeholder-icon { font-size: 64px; margin-bottom: 15px; }
.placeholder-text { font-size: 14px; text-align: center; padding: 0 20px; }
.document-title { font-size: 28px; margin-bottom: 15px; color: var(--text-color); }
.document-description { color: var(--text-light); margin-bottom: 20px; line-height: 1.6; }
.document-meta { display: flex; gap: 20px; margin-bottom: 25px; font-size: 14px; color: var(--text-light); }
.document-type { background: var(--bg-light); padding: 4px 12px; border-radius: 20px; }
.download-btn { display: inline-block; padding: 15px 30px; font-size: 16px; }
.document-seo-text { border-top: 2px solid var(--border-color); padding-top: 30px; }
@media (max-width: 768px) {
    .document-content-wrapper { grid-template-columns: 1fr; }
    .document-preview { max-width: 300px; margin: 0 auto; }
}
</style>
{% endblock %}
