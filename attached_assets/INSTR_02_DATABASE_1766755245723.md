\# INSTR 02: База данных и модели



\## Требуемые сущности (минимальный набор)



\### User (админ)

\- id

\- username (unique)

\- password\_hash

\- role (admin/editor)

\- is\_active



\### Page (статические страницы)

\- id

\- slug (например about, services...)

\- url\_path (например /about/)

\- title (видимый заголовок)

\- content\_html

\- seo\_title

\- seo\_description

\- h1

\- seo\_text\_html

\- is\_published

\- updated\_at



\### MenuItem

\- id

\- title

\- url

\- sort\_order

\- is\_active

\- is\_external

\- nofollow

\- target\_blank



\### Category

\- id

\- name

\- slug (top-level)

\- description\_html

\- image\_path

\- seo\_title, seo\_description, h1, seo\_text\_html

\- sort\_order

\- is\_active



\### ProductLine (линейка)

\- id

\- category\_id (FK)

\- name

\- slug

\- description\_html

\- image\_path

\- seo\_title, seo\_description, h1, seo\_text\_html

\- sort\_order

\- is\_active



\### SizeItem (типоразмер)

\- id

\- product\_line\_id (FK)

\- size\_text (40/75)

\- size\_slug (40\_75)

\- full\_name (авто: "{line\_name} {size\_text}")

\- sku

\- price

\- currency (RUB)

\- unit (м/шт)

\- in\_stock (bool)

\- image\_path

\- updated\_at



\### News

\- id

\- title (может быть авто из даты/первых слов)

\- slug

\- date (datetime/date)

\- content\_html

\- seo\_title, seo\_description, h1, seo\_text\_html

\- is\_published

\- created\_at



\### DocumentFile

\- id

\- title

\- file\_path

\- doc\_type (price/cert/manual/other)

\- created\_at



\### Lead

\- id

\- name

\- phone

\- email

\- message

\- source (site/telegram)

\- created\_at

\- status (new/in\_progress/done) (опционально)



\### RedirectRule

\- id

\- from\_path (unique recommended)

\- to\_path

\- code (301/302)

\- is\_active

\- comment

\- created\_at

\- updated\_at



\## Ограничения

\- Slug категорий не должен пересекаться с зарезервированными путями.

\- Уникальность: (category.slug), (product\_line.slug within category), (size\_slug within product\_line), (news.slug).



