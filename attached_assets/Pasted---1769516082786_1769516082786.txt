Задача: Хотим добавить на странице конкретного типоразмера Раздел "С этим товаром покупают:" И дальше список. Список должен формироваться автоматически на основании типоразмера и размеров в таблицах комплектующих соответствующей линейки.
К примеру типоразмер /izoprofleks_kasafleks/izoprofleks_06_mpa/25_63/ Размер 25/63 (html body main.main div.container div.product-detail div.product-info div table.product-specs tbody tr td
<tr>
	<th>Размер:</th>
	<td>25/63</td>
</tr>
)
должен подтягивать таблички комплектующих но со стороками, которые соответствуют размеру. То, что находится до "/" это размер напорной трубы к которой подбираются почти все комплектующие. В нашем случае это 25

Фитинг компрессионный
Типоразмер 	Исполнение 	d×s, мм 	D, мм 	L, мм 	L1, мм 	Масса, кг
25 	A 	25×2.3 - 1″ 	34.1 	36.2 	53 	0.18
25 	A 	25×3.5 - ¾″ 	32.1 	36.2 	49 	0.18

Пресс-фитинг под сварку
Типоразмер 	d×s, мм 	D, мм 	L, мм 	L1, мм 	Масса*, кг
25 	25×2.5 	30 	51 	50 	0.07 (0.11)


Проблема 1.
Стеновой уплотнитель подбирается по наружнему диаметру это то, что стоит после "/" в размере типоразмера в нашем случае 63. Проблема . Вероятно комплектующим по умолчанию надо добавлять еще одно свойство поле чек-бокс "подбирается по внешнему диаметру", которое по умолчанию не проставлено. Вот у стенового уплотнителя оно должно быть проставлено. Соответсвенно в раздел 
"С этим товаром покупают:" должна также подтянуться эта табличка с одной строкой

Типоразмер 	Название 	D, мм 	d, мм 	Масса, кг
63 	Уплотнитель стеновой 63 	106 	63 	0,16

Проблема 2.
Есть типоразмеры "32/75 Плюс" тут "Плюс" надо отбросить и смотреть только на 32/75

Проблема 3.
Есть типоразмеры, где перечисленно несколько труб. Это храктерно для многотрубных систем в общей оболочке или изоляции. Пример 25+25/90. Тут надо смотреть на все числа до /, если они одинаковые, то подбираем так, как будто это одно такое число. Числа могут быть разделены различными символами и текстом. Мы должны выбрать все числа и выбрать строки из таблиц комплектующих под все числа. Еще пример, с уже четверной трубой размер 25+25 SDR11 25+20 SDR7,4/145 тут до "/" 4 числа 25, 25, 25, 20 соответственно подбираем комплектующие которые соответсвуют размерам 25 и 20, и те комплектующие у которых стоит признак "подбирается по внешнему диаметру" подбираем по тому числу, что после "/" т.е. 145.

Проблема 4. 
У некоторых комплектующих Типоразмер бывает тоже с "/" например 32/75, тут надо будет подбирать по полному совпадению типоразмера комплектующего с размером типоразмера товара очищенного от лишних слов после числа после "/". Учесть что размер 32/75 Плюс мы воспринимаем, как 32/75.

Проблема 5. У некоторых линеек многие комплектующие совпадают. Надо сделать возможность в админке при создании нового комплектующего скопировать из другой линейки. К примеру хочу завести Стеновые уплотнители в линейку /izoprofleks_kasafleks/izoprofleks_95a/, а они уже есть /izoprofleks_kasafleks/izoprofleks_06_mpa/ при создании нового комплектующего в /admin/product-lines/14/accessories/ должна быть кнопка скопировать, где я смогу выбрать линейку и выбрать конкретное комплектующее. И тогда оно появится также и вразделе комплектующих этой линейки. Важно, что картинки и таблички и все описания мы именно копируем. Чтобы потом при правке этого комплектующего и его картинки, не менялось все в том месте откуда мы скопировали.

Если есть уточняющие вопросы, готов разобрать и дать еще примеры. Важно сформулировать четкий план, чтобы я понял, что ты меня точно понял.
